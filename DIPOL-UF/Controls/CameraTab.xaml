<UserControl x:Class="DIPOL_UF.Controls.CameraTab"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:enm="clr-namespace:ANDOR_CS.Enums;assembly=ANDOR_CS"
             xmlns:cmnds="clr-namespace:DIPOL_UF.Commands"
             xmlns:local="clr-namespace:DIPOL_UF.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="500">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.5*"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="3*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="4.5*"/>
            <ColumnDefinition Width="2.5*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <!--PLACEHOLDER FOR IMAGE CONTROL-->
        <Canvas Grid.Row="0" Grid.Column="0"
                    Grid.RowSpan="3"
                    VerticalAlignment="Stretch" HorizontalAlignment="Stretch"></Canvas>
        <TextBlock Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Text="{Binding}"/>
        <Label Grid.Row="1" Grid.Column="1" BorderThickness="2" BorderBrush="Black">Detailed status</Label>
        <Grid Grid.Column="2" Grid.Row="1" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Slider Grid.Column="0" Grid.Row="0" HorizontalAlignment="Center"
                        Orientation="Vertical" Name="TempSetSlider"
                        IsEnabled="{Binding Value.CanControlTemperature, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                        Minimum="{Binding Value.MinimumAllowedTemperature, Mode=OneTime}"
                        Maximum="{Binding Value.MaximumAllowedTemperature, Mode=OneTime}"
                        Value="{Binding
                            Path=Value.TargetTemperature,
                            Mode=TwoWay,
                            UpdateSourceTrigger=PropertyChanged,
                            Converter={StaticResource ResourceKey=TypeConverter}}">

            </Slider>
            <ProgressBar Grid.Column="1" Grid.Row="0" Width="10" HorizontalAlignment="Center"
                             Orientation="Vertical" IsIndeterminate="False"
                             Minimum="{Binding Value.MinimumAllowedTemperature, Mode=OneTime}"
                             Maximum="{Binding Value.MaximumAllowedTemperature, Mode=OneTime}"
                             IsEnabled="{Binding Value.CanQueryTemperature, Mode=OneTime}">
                <ProgressBar.Value>
                    <MultiBinding Mode="OneWay"
                            Converter="{StaticResource ResourceKey=CameraStatsToValueMultiConverter}"
                            ConverterParameter="Temp"
                            UpdateSourceTrigger="PropertyChanged">
                        <Binding ElementName="DipolWindow" Path="DataContext.CameraRealTimeStats"
                                     Mode="OneWay" UpdateSourceTrigger="PropertyChanged" />
                        <Binding Path="Key"/>
                    </MultiBinding>
                </ProgressBar.Value>
                <ProgressBar.Foreground>
                    <MultiBinding Mode="OneWay"
                                      Converter="{StaticResource ResourceKey=TemperatureToBrushMultiConverter}"
                                      ConverterParameter="{StaticResource TemperatureColorBrushCollection}"
                                      UpdateSourceTrigger="PropertyChanged">
                        <Binding ElementName="DipolWindow" Path="DataContext.CameraRealTimeStats"
                                     Mode="OneWay" UpdateSourceTrigger="PropertyChanged"/>
                        <Binding Path="Key"/>
                    </MultiBinding>
                </ProgressBar.Foreground>
            </ProgressBar>
            <TextBox Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" 
                         Name="TempControlTextBox" Margin="2"
                         IsEnabled="{Binding Value.CanControlTemperature, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                         TextChanged="{cmnds:EventToCommand VerifyTextInputCommand, PropertyName=Value}"
                         PreviewTextInput="{cmnds:EventToCommand VerifyTextInputCommand, PropertyName=Value}"
                         Text="{Binding
                            Path=Value.TargetTemperature,
                            Mode=TwoWay,
                            UpdateSourceTrigger=PropertyChanged,
                            Converter={StaticResource ResourceKey=SingleDoubleToStringConverter},
                            ConverterParameter='F1'}">

            </TextBox>
            <Button Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2" 
                        Command="{Binding Value.ControlCoolerCommand}">
                <Button.Content>
                    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock.Style>
                            <Style 
                                BasedOn="{StaticResource ResourceKey=ContentFont_TextBlock}"
                                TargetType="{x:Type TextBlock}">
                                <Style.Triggers>
                                    <DataTrigger 
                                            Binding="{Binding
                                                Path = Value.Camera.CoolerMode,
                                                Mode=OneWay,
                                                UpdateSourceTrigger=PropertyChanged}" 
                                            Value="{x:Static enm:Switch.Enabled}">
                                        <Setter Property="TextBlock.Text" Value="Cooling"/>
                                    </DataTrigger>
                                    <DataTrigger 
                                            Binding="{Binding
                                                Path = Value.Camera.CoolerMode,
                                                Mode=OneWay,
                                                UpdateSourceTrigger=PropertyChanged}" 
                                            Value="{x:Static enm:Switch.Disabled}">
                                        <Setter Property="TextBlock.Text" Value="Off"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Button.Content>
                <Button.Style>
                    <Style 
                        BasedOn="{StaticResource ResourceKey=BasicButtonStyle}"
                        TargetType="{x:Type Button}">
                        <Setter Property="Width" Value="auto"/>
                        <Setter Property="Height" Value="auto"/>
                        <Style.Triggers>
                            <DataTrigger 
                                            Binding="{Binding
                                                Path = Value.Camera.CoolerMode,
                                                Mode=OneWay,
                                                UpdateSourceTrigger=PropertyChanged}" 
                                            Value="{x:Static enm:Switch.Enabled}">
                                <Setter Property="Button.Background" 
                                            Value="{StaticResource ResourceKey=PositiveEffectButtonBackgroundColor}"/>
                                <Setter Property="Button.Foreground" 
                                            Value="{StaticResource ResourceKey=PositiveEffectButtonForegroundColor}"/>
                            </DataTrigger>
                            <DataTrigger 
                                            Binding="{Binding
                                                Path = Value.Camera.CoolerMode,
                                                Mode=OneWay,
                                                UpdateSourceTrigger=PropertyChanged}" 
                                            Value="{x:Static enm:Switch.Disabled}">
                                <Setter Property="Button.Background" 
                                                    Value="{StaticResource ResourceKey=NegativeEffectButtonBackgroundColor}"/>
                                <Setter Property="Button.Foreground" 
                                                    Value="{StaticResource ResourceKey=NegativeEffectButtonForegroundColor}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Grid>
</UserControl>
